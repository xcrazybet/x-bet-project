<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-BET - Dashboard</title>
    <style>
        /* Previous styles remain the same, adding transaction modal styles */
        .transaction-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1002;
            align-items: center;
            justify-content: center;
        }

        .transaction-content {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            text-align: center;
        }

        .transaction-input {
            width: 100%;
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            text-align: center;
        }

        .transaction-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }

        .transaction-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .confirm-btn {
            background: #4CAF50;
            color: white;
        }

        .cancel-btn {
            background: #ff6b6b;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Previous HTML structure remains the same -->

    <!-- Deposit Modal -->
    <div class="transaction-modal" id="depositModal">
        <div class="transaction-content">
            <h3>üí∞ Deposit Funds</h3>
            <p>Enter amount to deposit</p>
            <input type="number" id="depositAmount" class="transaction-input" placeholder="Enter amount ($)" min="1" step="0.01">
            <div class="transaction-buttons">
                <button class="transaction-btn confirm-btn" onclick="processDeposit()">Confirm Deposit</button>
                <button class="transaction-btn cancel-btn" onclick="closeModal('depositModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div class="transaction-modal" id="withdrawModal">
        <div class="transaction-content">
            <h3>üí∞ Withdraw Funds</h3>
            <p>Enter amount to withdraw</p>
            <input type="number" id="withdrawAmount" class="transaction-input" placeholder="Enter amount ($)" min="1" step="0.01">
            <div class="transaction-buttons">
                <button class="transaction-btn confirm-btn" onclick="processWithdrawal()">Confirm Withdrawal</button>
                <button class="transaction-btn cancel-btn" onclick="closeModal('withdrawModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Transaction History Modal -->
    <div class="transaction-modal" id="historyModal">
        <div class="transaction-content">
            <h3>üìä Transaction History</h3>
            <div id="transactionList" style="max-height: 300px; overflow-y: auto; margin: 1rem 0; text-align: left;">
                <!-- Transactions will be populated here -->
            </div>
            <button class="transaction-btn cancel-btn" onclick="closeModal('historyModal')">Close</button>
        </div>
    </div>

    <script>
        // Transaction functions
        function processDeposit() {
            const amount = parseFloat(document.getElementById('depositAmount').value);
            if (!amount || amount <= 0) {
                showToast('Please enter a valid amount');
                return;
            }

            // Simulate deposit processing
            userData.balance += amount;
            userData.transactions.push({
                type: 'deposit',
                amount: amount,
                date: new Date().toLocaleString(),
                status: 'pending',
                id: generateTransactionId()
            });
            
            saveUserData(auth.currentUser);
            updateUI();
            closeModal('depositModal');
            showToast(`Deposit request for $${amount} submitted! Contact admin with your User ID: ${userData.userId}`);
        }

        function processWithdrawal() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            if (!amount || amount <= 0) {
                showToast('Please enter a valid amount');
                return;
            }

            if (amount > userData.balance) {
                showToast('Insufficient balance for withdrawal');
                return;
            }

            // Simulate withdrawal processing
            userData.balance -= amount;
            userData.transactions.push({
                type: 'withdrawal',
                amount: amount,
                date: new Date().toLocaleString(),
                status: 'pending',
                id: generateTransactionId()
            });
            
            saveUserData(auth.currentUser);
            updateUI();
            closeModal('withdrawModal');
            showToast(`Withdrawal request for $${amount} submitted! Contact admin with your User ID: ${userData.userId}`);
        }

        function showTransactionHistory() {
            const transactionList = document.getElementById('transactionList');
            if (userData.transactions.length === 0) {
                transactionList.innerHTML = '<p style="text-align: center; color: #ccc;">No transactions yet.</p>';
            } else {
                let html = '';
                userData.transactions.forEach((transaction, index) => {
                    const typeColor = transaction.type === 'deposit' ? '#4CAF50' : '#ff6b6b';
                    const typeIcon = transaction.type === 'deposit' ? '‚¨áÔ∏è' : '‚¨ÜÔ∏è';
                    html += `
                        <div style="background: rgba(255,255,255,0.1); padding: 0.75rem; border-radius: 8px; margin-bottom: 0.5rem;">
                            <div style="display: flex; justify-content: between; align-items: center;">
                                <span style="color: ${typeColor}; font-weight: bold;">${typeIcon} ${transaction.type.toUpperCase()}</span>
                                <span style="font-weight: bold;">$${transaction.amount}</span>
                            </div>
                            <div style="font-size: 0.8rem; color: #ccc; margin-top: 0.25rem;">
                                ${transaction.date} ‚Ä¢ ${transaction.status}
                            </div>
                        </div>
                    `;
                });
                transactionList.innerHTML = html;
            }
            document.getElementById('historyModal').style.display = 'flex';
        }

        function generateTransactionId() {
            return 'TXN' + Date.now() + Math.random().toString(36).substr(2, 5).toUpperCase();
        }

        // Update modal functions
        function openDepositModal() {
            document.getElementById('depositAmount').value = '';
            document.getElementById('depositModal').style.display = 'flex';
        }

        function openWithdrawModal() {
            document.getElementById('withdrawAmount').value = '';
            document.getElementById('withdrawModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
    </script>
</body>
</html>
